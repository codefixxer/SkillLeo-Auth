<!-- page 9 -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Welcome to ProMatch!</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>

  <style>
    :root {
      /* Core (same vibe as previous steps) */
      --primary: #0061FF;
      --dark: #000000;
      --white: #FFFFFF;

      --gray-900: #111111;
      --gray-700: #404040;
      --gray-500: #737373;
      --gray-300: #E5E7EB;
      --gray-100: #F9FAFB;

      --success: #10B981;
      --accent: #00A0DC;
      --warning: #F59E0B;

      --shadow-sm: 0 2px 8px rgba(0,0,0,0.06);
      --shadow-md: 0 8px 24px rgba(0,0,0,0.08);
      --shadow-lg: 0 12px 40px rgba(0,0,0,0.12);

      --gradient: linear-gradient(135deg, #0066CC 0%, #00A0DC 100%);
      --gradient-success: linear-gradient(135deg, #10B981 0%, #34D399 100%);
    }

    /* Reset */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      color: var(--gray-900);
      background: var(--white);
      -webkit-font-smoothing: antialiased;
      line-height: 1.5;
      overflow-x: hidden;
    }

    /* Celebration canvas (fireworks + confetti) */
    .celebration {
      position: fixed; inset: 0; width: 100%; height: 100%;
      pointer-events: none; z-index: 1;   /* sits above bg, below content */
    }

    /* Header â€” consistent with earlier pages */
    .header {
      position: fixed; top: 0; left: 0; right: 0;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--gray-300);
      z-index: 100;
    }
    .header__inner {
      max-width: 1200px; margin: 0 auto; padding: 16px 24px;
      display: flex; align-items: center; justify-content: center; min-height: 64px;
    }
    .logo { height: 28px; width: auto; display: block; }

    /* Layout â€” matches previous step cards */
    .container {
      max-width: 640px; margin: 0 auto;
      padding: 100px 24px 40px; /* space for fixed header */
      min-height: 100vh; display: grid; align-items: center;
      position: relative; z-index: 2; /* above celebrations */
    }
    .form-card {
      width: 100%; background: rgba(255,255,255,0.98); backdrop-filter: blur(16px);
      border: 1px solid var(--gray-300); border-radius: 16px; padding: 40px;
      box-shadow: var(--shadow-sm); animation: slideUp .6s ease-out;
      text-align: center;
    }
    @keyframes slideUp { from { opacity:0; transform: translateY(20px);} to { opacity:1; transform:none;} }

    /* Header section in card */
    .step-badge {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 8px 14px; background: var(--gray-100); color: var(--gray-700);
      border-radius: 20px; font-size: 13px; font-weight: 600; margin-bottom: 16px;
    }
    .step-badge::before {
      content: '';
      width: 6px; height: 6px; background: var(--success); border-radius: 50%;
      animation: pulse 2s ease-in-out infinite;
    }
    @keyframes pulse { 0%,100%{opacity:1; transform: scale(1)} 50%{opacity:.5; transform: scale(1.2)} }

    .form-title { font-size: 32px; font-weight: 800; color: var(--gray-900); margin: 8px 0 6px; letter-spacing: -0.02em; }
    .form-subtitle { font-size: 16px; color: var(--gray-500); max-width: 460px; margin: 0 auto 24px; }

    /* Success icon */
    .success-wrap {
      display:grid; place-items:center; margin-bottom: 20px; position:relative;
    }
    .success-icon {
      width: 88px; height: 88px; border-radius: 50%;
      background: var(--gradient-success); color:#fff;
      display:grid; place-items:center; box-shadow: var(--shadow-lg);
      position: relative; isolation: isolate;
    }
    .success-icon::after {
      content:''; position:absolute; inset:-10px; border-radius:50%;
      background: conic-gradient(from 0deg, rgba(16,185,129,.0), rgba(16,185,129,.25), rgba(0,160,220,.25), rgba(16,185,129,.0));
      filter: blur(12px); z-index:-1; animation: spin 6s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Profile link card */
    .profile-card {
      margin-top: 16px;
      border: 1px solid var(--gray-300); background: var(--gray-100);
      border-radius: 12px; padding: 18px; text-align: left;
    }
    .profile-url {
      font-weight: 700; color: var(--primary); word-break: break-all; margin-bottom: 10px;
    }
    .actions { display:flex; gap: 10px; flex-wrap: wrap; justify-content: center; margin-top: 18px; }

    .btn {
      padding: 12px 20px; border-radius: 10px; font-weight: 700; font-size: 15px;
      cursor: pointer; border: 1px solid var(--gray-300);
      display: inline-flex; align-items: center; gap: 8px;
      transition: transform .15s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
      background: var(--white); color: var(--gray-900);
    }
    .btn:hover { transform: translateY(-1px); box-shadow: var(--shadow-sm); }
    .btn-primary { background: var(--dark); color: #fff; border-color: var(--dark); }
    .btn-primary:hover { box-shadow: 0 4px 12px rgba(0,0,0,.15); }
    .btn-success { background: var(--success); color:#fff; border-color: var(--success); }
    .btn-ghost { background: var(--white); color: var(--gray-700); }
    .btn-ghost:hover { background: var(--gray-100); }

    /* Stats */
    .stats {
      display:grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 22px;
    }
    .stat {
      background: var(--white); border: 1px solid var(--gray-300);
      border-radius: 12px; padding: 14px; text-align:center;
    }
    .stat .n { font-weight: 800; color: var(--gray-900); font-size: 20px; }
    .stat .l { font-size: 12px; color: var(--gray-500); }

    /* Toast */
    .toast {
      position: fixed; top: 20px; right: 20px; background: var(--dark); color: #fff;
      padding: 12px 16px; border-radius: 10px; font-size: 13px; box-shadow: var(--shadow-lg); z-index: 200;
      animation: toastIn .2s ease;
    }
    @keyframes toastIn { from{opacity:0; transform: translateY(-6px);} to{opacity:1; transform:none;} }

    /* Mobile */
    @media (max-width: 640px) {
      .container { padding: 84px 16px 24px; }
      .form-card { padding: 32px 24px; }
      .form-title { font-size: 26px; }
      .stats { grid-template-columns: 1fr; }
      .actions { flex-direction: column; }
      .btn { width: 100%; justify-content: center; }
    }

    .sr-only {
      position: absolute !important; width:1px; height:1px; padding:0; margin:-1px;
      overflow:hidden; clip: rect(0,0,1px,1px); white-space:nowrap; border:0;
    }
  </style>
</head>
<body>
  <!-- Celebration Canvas -->
  <canvas id="celebrationCanvas" class="celebration" aria-hidden="true"></canvas>

  <!-- Header -->
  <header class="header">
    <div class="header__inner">
      <picture>
        <source media="(max-width: 768px)" srcset="../logos/rm-bg/icon1.png"/>
        <img class="logo" src="../logos/rm-bg/logo1.png" alt="ProMatch"/>
      </picture>
    </div>
  </header>

  <!-- Main -->
  <main class="container">
    <section class="form-card" aria-labelledby="welcome-title">
      <div class="step-badge">Welcome to ProMatch</div>
      <div class="success-wrap">
        <div class="success-icon" aria-hidden="true">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <polyline points="20 6 9 17 4 12"/>
          </svg>
        </div>
      </div>
      <h1 class="form-title" id="welcome-title">Your account is live! ðŸŽ‰</h1>
      <p class="form-subtitle">Everything is set. Celebrate the launch and share your professional profile.</p>

      <div class="profile-card">
        <div class="profile-url" id="profileUrl">promatch.com/username</div>
        <button class="btn btn-ghost" id="copyBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
            <path d="m5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke="currentColor" stroke-width="2"/>
          </svg>
          Copy link
        </button>
      </div>

      <div class="actions">
        <button class="btn btn-primary" id="profileBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"/></svg>
          Go to profile
        </button>
        <button class="btn btn-success" id="dashboardBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/><rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/><rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/><rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/></svg>
          Go to dashboard
        </button>
        <button class="btn btn-ghost" id="shareBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7M16 6l-4-4-4 4M12 2v14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Share
        </button>
      </div>

      <div class="stats" aria-label="Quick stats">
        <div class="stat">
          <div class="n" id="skillsCount">0</div>
          <div class="l">Skills</div>
        </div>
        <div class="stat">
          <div class="n" id="profileComplete">0%</div>
          <div class="l">Complete</div>
        </div>
        <div class="stat">
          <div class="n" id="visibility">Live</div>
          <div class="l">Status</div>
        </div>
      </div>
    </section>
  </main>

  <script>
    /* =============== DATA & UI HELPERS =============== */
    function toast(msg){
      const t = document.createElement('div');
      t.className = 'toast';
      t.textContent = msg;
      document.body.appendChild(t);
      setTimeout(()=>{ t.style.opacity='0'; t.style.transform='translateY(-6px)'; setTimeout(()=> t.remove(), 200); }, 2200);
    }

    function loadProfileBits(){
      const personal = JSON.parse(localStorage.getItem('onboarding_personal') || '{}');
      const skills = JSON.parse(localStorage.getItem('onboarding_skills') || '[]');
      const exp = JSON.parse(localStorage.getItem('onboarding_experience') || '[]');
      const port = JSON.parse(localStorage.getItem('onboarding_portfolio') || '[]');
      const edu = JSON.parse(localStorage.getItem('onboarding_education') || '[]');

      const url = `promatch.com/${personal.username || 'username'}`;
      document.getElementById('profileUrl').textContent = url;

      // counters
      const skillsN = skills.length;
      const completePct = (() => {
        let p = 0;
        if (personal.firstName && personal.lastName) p += 25;
        if (personal.username) p += 15;
        if (skillsN >= 3) p += 30;
        if (exp.length) p += 20;
        if (port.length || edu.length) p += 10;
        return Math.min(100, p);
      })();

      animateCount('skillsCount', skillsN, 800);
      animateCountPercent('profileComplete', completePct, 1000);
    }

    function animateCount(id, target, dur){
      const el = document.getElementById(id);
      const start = performance.now();
      function tick(now){
        const t = Math.min(1, (now - start)/dur);
        el.textContent = Math.round(t * target);
        if (t < 1) requestAnimationFrame(tick);
      }
      requestAnimationFrame(tick);
    }
    function animateCountPercent(id, target, dur){
      const el = document.getElementById(id);
      const start = performance.now();
      function tick(now){
        const t = Math.min(1, (now - start)/dur);
        el.textContent = Math.round(t * target) + '%';
        if (t < 1) requestAnimationFrame(tick);
      }
      requestAnimationFrame(tick);
    }

    /* =============== ACTIONS =============== */
    document.getElementById('copyBtn').addEventListener('click', async (e) => {
      const full = 'https://' + document.getElementById('profileUrl').textContent;
      try { await navigator.clipboard.writeText(full); toast('Link copied'); }
      catch { toast('Could not copy link'); }
    });

    document.getElementById('profileBtn').addEventListener('click', () => {
      const url = 'https://' + document.getElementById('profileUrl').textContent;
      try { window.location.href = url; } catch { toast('Opening profileâ€¦'); }
    });

    document.getElementById('dashboardBtn').addEventListener('click', () => {
      try { window.location.href = '/dashboard'; } catch { toast('Opening dashboardâ€¦'); }
    });

    document.getElementById('shareBtn').addEventListener('click', async () => {
      const full = 'https://' + document.getElementById('profileUrl').textContent;
      if (navigator.share) {
        try { await navigator.share({ title: 'My ProMatch Profile', url: full }); }
        catch {}
      } else {
        try { await navigator.clipboard.writeText(full); toast('Link copied to share'); }
        catch {}
      }
    });

    /* =============== PROFESSIONAL CELEBRATIONS (Canvas) =============== */
    (() => {
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (prefersReduced) { loadProfileBits(); return; }

      const cvs = document.getElementById('celebrationCanvas');
      const ctx = cvs.getContext('2d');
      let w, h, rafId, running = true;
      const DPR = Math.min(2, window.devicePixelRatio || 1);

      const colors = ['#0066CC', '#00A0DC', '#10B981', '#F59E0B', '#111111'];

      const fireworks = [];
      const confetti = [];

      function resize(){
        w = cvs.width = Math.floor(window.innerWidth * DPR);
        h = cvs.height = Math.floor(window.innerHeight * DPR);
        cvs.style.width = window.innerWidth + 'px';
        cvs.style.height = window.innerHeight + 'px';
        ctx.setTransform(1,0,0,1,0,0);
        ctx.scale(DPR, DPR);
      }
      resize(); window.addEventListener('resize', resize);

      class Particle {
        constructor(x, y, angle, speed, color, life=120) {
          this.x = x; this.y = y;
          this.vx = Math.cos(angle) * speed;
          this.vy = Math.sin(angle) * speed;
          this.alpha = 1;
          this.color = color;
          this.life = life;
          this.age = 0;
          this.size = 2 + Math.random()*2;
        }
        step() {
          this.age++;
          // gravity + air resistance
          this.vy += 0.02;
          this.vx *= 0.995; this.vy *= 0.995;
          this.x += this.vx; this.y += this.vy;
          this.alpha = Math.max(0, 1 - this.age / this.life);
          return this.alpha > 0;
        }
        draw() {
          ctx.globalAlpha = this.alpha;
          ctx.beginPath();
          ctx.fillStyle = this.color;
          ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
          ctx.fill();
        }
      }

      class Firework {
        constructor() {
          this.x = Math.random() * window.innerWidth;
          this.y = window.innerHeight + 10;
          this.tx = Math.random() * window.innerWidth;
          this.ty = window.innerHeight * (0.2 + Math.random()*0.4);
          this.color = colors[Math.floor(Math.random()*colors.length)];
          this.speed = 6 + Math.random()*2;
          this.exploded = false;
          this.particles = [];
        }
        step() {
          if (!this.exploded) {
            const dx = this.tx - this.x, dy = this.ty - this.y;
            const d = Math.hypot(dx, dy);
            const vx = (dx / d) * this.speed;
            const vy = (dy / d) * this.speed;
            this.x += vx; this.y += vy;
            // trail
            ctx.globalAlpha = 0.25;
            ctx.fillStyle = this.color;
            ctx.fillRect(this.x - 1, this.y - 1, 2, 2);
            // reached
            if (d < 8) {
              this.exploded = true;
              const count = 28 + Math.floor(Math.random()*24);
              for (let i=0; i<count; i++) {
                const angle = (i / count) * Math.PI*2 + Math.random()*0.2;
                const speed = 1.5 + Math.random()*3.5;
                this.particles.push(new Particle(this.x, this.y, angle, speed, this.color, 90 + Math.random()*40));
              }
            }
          } else {
            this.particles = this.particles.filter(p => { const alive = p.step(); p.draw(); return alive; });
          }
          return this.exploded && this.particles.length === 0 ? false : true;
        }
      }

      class Confetto {
        constructor() {
          this.x = Math.random()*window.innerWidth;
          this.y = -10;
          this.w = 6 + Math.random()*6;
          this.h = 10 + Math.random()*8;
          this.color = colors[Math.floor(Math.random()*colors.length)];
          this.spin = Math.random()*Math.PI*2;
          this.vx = -0.5 + Math.random();
          this.vy = 1 + Math.random()*1.5;
          this.g = 0.015 + Math.random()*0.015;
        }
        step() {
          this.vy += this.g;
          this.x += this.vx;
          this.y += this.vy;
          this.spin += 0.12;
          return this.y < window.innerHeight + 20;
        }
        draw() {
          ctx.save();
          ctx.translate(this.x, this.y);
          ctx.rotate(this.spin);
          ctx.fillStyle = this.color;
          ctx.globalAlpha = 0.9;
          ctx.fillRect(-this.w/2, -this.h/2, this.w, this.h);
          ctx.restore();
        }
      }

      let startTime = performance.now();
      function loop(now){
        ctx.clearRect(0,0,window.innerWidth,window.innerHeight);

        // launch fireworks for first ~6s
        if (now - startTime < 6000 && Math.random() < 0.06) fireworks.push(new Firework());
        // steady confetti
        if (Math.random() < 0.15 && confetti.length < 120) confetti.push(new Confetto());

        // step/draw fireworks
        for (let i=fireworks.length-1;i>=0;i--){
          const keep = fireworks[i].step();
          if (!keep) fireworks.splice(i,1);
        }
        // step/draw confetti
        for (let i=confetti.length-1;i>=0;i--){
          const c = confetti[i];
          const keep = c.step(); c.draw();
          if (!keep) confetti.splice(i,1);
        }

        if (running) rafId = requestAnimationFrame(loop);
      }

      // start
      rafId = requestAnimationFrame(loop);

      // graceful stop after 12s to save CPU, leave some confetti floating
      setTimeout(()=>{ running = false; cancelAnimationFrame(rafId); }, 12000);

      // init counters and url
      loadProfileBits();
    })();

    // Init on ready (ensure counters if reduced motion)
    document.addEventListener('DOMContentLoaded', loadProfileBits);
  </script>
</body>
</html>
