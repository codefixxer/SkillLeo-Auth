<!-- page 3 -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Skills & Expertise - ProMatch</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>

  <style>
    :root {
      /* Same design tokens as your other onboarding pages */
      --primary: #0061FF;
      --dark: #000000;
      --gray-900: #111111;
      --gray-700: #404040;
      --gray-500: #737373;
      --gray-300: #E5E7EB;
      --gray-100: #F9FAFB;
      --white: #FFFFFF;
      --error: #EF4444;
      --success: #10B981;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      color: var(--gray-900);
      background: var(--white);
      -webkit-font-smoothing: antialiased;
      line-height: 1.5;
      position: relative;
      overflow-x: hidden;
    }

    /* Background canvas (parity with other pages) */
    .bg-canvas {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      opacity: 0.02;
    }

    /* Floating shapes */
    .bg-decoration {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -2;
    }
    .floating-shape {
      position: absolute;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(0, 97, 255, 0.1) 0%, rgba(0, 97, 255, 0.05) 100%);
      animation: float 20s ease-in-out infinite;
    }
    .floating-shape:nth-child(1){ width:300px; height:300px; top:10%; right:10%; animation-delay:0s; }
    .floating-shape:nth-child(2){ width:200px; height:200px; bottom:20%; left:5%; animation-delay:7s; }
    .floating-shape:nth-child(3){ width:150px; height:150px; top:50%; right:30%; animation-delay:14s; }

    @keyframes float {
      0%,100% { transform: translateY(0) rotate(0deg); opacity: .1; }
      25%     { transform: translateY(-30px) rotate(90deg); opacity: .15; }
      50%     { transform: translateY(-20px) rotate(180deg); opacity: .1; }
      75%     { transform: translateY(-40px) rotate(270deg); opacity: .12; }
    }

    /* Fixed header */
    .header {
      position: fixed;
      top: 0; left: 0; right: 0;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--gray-300);
      z-index: 100;
    }
    .header__inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 16px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      min-height: 64px;
    }
    .logo { height: 28px; width: auto; display: block; }

    /* Progress (header) */
    .progress-container {
      display: flex; align-items: center; gap: 12px;
      font-size: 13px; color: var(--gray-500); font-weight: 500;
    }
    .progress-bar {
      width: 120px; height: 6px; background: var(--gray-300);
      border-radius: 3px; overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: var(--dark);
      transition: width 0.6s ease;
      width: 37.5%; /* Step 3 of 8 initial */
    }

    /* Main container & card */
    .container {
      max-width: 640px;
      margin: 0 auto;
      padding: 100px 24px 40px; /* space for fixed header */
      min-height: 100vh;
      display: flex;
      align-items: center;
    }
    .form-card {
      width: 100%;
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(20px);
      border: 1px solid var(--gray-300);
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.03);
      animation: slideUp 0.6s ease-out;
    }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* Card header */
    .form-header { margin-bottom: 32px; }
    .step-badge {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 6px 14px; background: var(--gray-100); color: var(--gray-700);
      border-radius: 20px; font-size: 13px; font-weight: 500; margin-bottom: 16px;
    }
    .step-badge::before {
      content: ''; width: 6px; height: 6px; background: var(--primary);
      border-radius: 50%; animation: pulse 2s ease-in-out infinite;
    }
    @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.5} }

    .form-title {
      font-size: 28px; font-weight: 700; color: var(--dark);
      margin-bottom: 8px; letter-spacing: -0.02em;
    }
    .form-subtitle { font-size: 15px; color: var(--gray-500); }

    /* Form body */
    .form-group { margin-bottom: 24px; }
    .form-label {
      display: block; font-size: 14px; font-weight: 500;
      color: var(--gray-700); margin-bottom: 8px;
    }
    .form-input {
      width: 100%; padding: 12px 16px;
      border: 1px solid var(--gray-300); border-radius: 8px;
      font-size: 15px; font-family: inherit; background: var(--white);
      transition: all .2s ease;
    }
    .form-input:focus {
      outline: none; border-color: var(--dark);
      box-shadow: 0 0 0 3px rgba(0,0,0,0.05);
    }
    .input-hint { font-size: 13px; color: var(--gray-500); margin-top: 8px; }

    /* a11y helper */
    .sr-only {
      position: absolute !important;
      height: 1px; width: 1px;
      overflow: hidden;
      clip: rect(1px, 1px, 1px, 1px);
      white-space: nowrap;
    }

    /* input + level dropdown row */
    .input-row {
      display: grid;
      grid-template-columns: 1fr 160px;
      gap: 12px;
      align-items: start;
    }
    .level-select-wrap { position: relative; }
    .level-select {
      width: 100%;
      padding: 12px 14px;
      border: 1px solid var(--gray-300);
      border-radius: 8px;
      font: inherit;
      background: var(--white);
      color: var(--gray-900);
      cursor: pointer;
      transition: box-shadow .2s ease, border-color .2s ease;
    }
    .level-select:focus {
      outline: none;
      border-color: var(--dark);
      box-shadow: 0 0 0 3px rgba(0,0,0,0.05);
    }

    /* Skills progress row */
    .skills-progress {
      margin: 24px 0;
      padding: 12px 14px;
      background: var(--gray-100);
      border: 1px solid var(--gray-300);
      border-radius: 8px;
      display: flex; align-items: center; gap: 12px;
      justify-content: space-between; flex-wrap: wrap;
    }
    .skills-progress .progress-text { font-size: 13px; color: var(--gray-700); }
    .progress-mini {
      flex: 1 1 160px;
      height: 6px; background: var(--gray-300);
      border-radius: 3px; overflow: hidden;
    }
    .progress-mini__fill {
      height: 100%;
      background: var(--dark);
      transition: width .4s ease;
      width: 0%;
    }

    /* Skills area */
    .skills-area {
      border: 1px dashed var(--gray-300);
      border-radius: 12px;
      padding: 24px;
      background: var(--white);
    }
    .skills-empty {
      text-align: center; color: var(--gray-500);
      margin: 8px 0 0;
      font-size: 14px;
    }
    .skills-list {
      display: flex; flex-wrap: wrap; gap: 10px;
    }

    /* Skill chip */
    .skill-chip {
      display: inline-flex; align-items: center; gap: 10px;
      padding: 10px 12px; border: 1px solid var(--gray-300);
      background: var(--white); border-radius: 10px; font-size: 13px;
      transition: box-shadow .2s ease, transform .2s ease;
    }
    .skill-chip:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.06); transform: translateY(-1px); }
    .skill-name { font-weight: 600; color: var(--gray-900); }

    .level-badge {
      font-size: 12px;
      line-height: 1;
      padding: 6px 8px;
      border-radius: 999px;
      background: var(--gray-100);
      color: var(--gray-700);
      border: 1px solid var(--gray-300);
    }

    .skill-level { display: inline-flex; gap: 4px; align-items: center; }
    .level-dot {
      width: 10px; height: 10px;
      appearance: none;
      border-radius: 50%;
      border: 1px solid var(--gray-300);
      background: var(--white);
      cursor: pointer;
      display: inline-flex;
      align-items: center; justify-content: center;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
    }
    .level-dot.active { background: var(--dark); border-color: var(--dark); }
    .level-dot:focus-visible { outline: 2px solid var(--dark); outline-offset: 2px; }
    .level-dot:hover { transform: scale(1.12); }

    .chip-remove {
      width: 24px; height: 24px;
      border-radius: 50%;
      border: 1px solid var(--gray-300);
      background: var(--white);
      color: var(--gray-700);
      cursor: pointer;
      display: inline-flex; align-items: center; justify-content: center;
      line-height: 1; font-size: 16px;
      transition: background .2s ease, color .2s ease, transform .15s ease, border-color .2s ease;
    }
    .chip-remove:hover { background: #FEE2E2; color: #DC2626; border-color: #FCA5A5; transform: scale(1.05); }

    /* Tips */
    .tips {
      margin-top: 20px;
      padding: 14px;
      background: rgba(16,185,129,0.08);
      border: 1px solid rgba(16,185,129,0.3);
      border-radius: 8px;
      color: var(--gray-700);
      font-size: 13px;
    }
    .tips strong { color: var(--success); }

    /* Actions footer */
    .form-actions {
      display: flex; justify-content: space-between; align-items: center;
      margin-top: 40px; padding-top: 24px; border-top: 1px solid var(--gray-300);
    }
    .btn {
      padding: 12px 24px; border-radius: 8px; font-weight: 500; font-size: 15px;
      cursor: pointer; border: none; text-decoration: none; display: inline-flex;
      align-items: center; gap: 8px; transition: all .2s ease; font-family: inherit;
    }
    .btn svg { display: block; }
    .btn-back {
      background: var(--white); color: var(--gray-700); border: 1px solid var(--gray-300);
    }
    .btn-back:hover { border-color: var(--gray-700); background: var(--gray-100); }
    .btn-primary {
      background: var(--dark); color: var(--white); min-width: 120px; justify-content: center;
    }
    .btn-primary:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
    .btn-primary:disabled { opacity: .3; cursor: not-allowed; box-shadow: none; transform: none; }

    /* Mobile */
    @media (max-width: 640px) {
      .container { padding: 80px 16px 24px; }
      .form-card { padding: 32px 24px; }
      .form-title { font-size: 24px; }
      .form-actions { flex-direction: column-reverse; gap: 12px; }
      .btn { width: 100%; justify-content: center; }
      .floating-shape { opacity: .05; }
      .input-row { grid-template-columns: 1fr; }
    }





    /* === Animated Particle Background (drop-in) ===============================
   Paste this after your existing CSS. Works with your current HTML:
   <div class="bg-decoration"><div class="floating-shape"></div>×3</div>
   ======================================================================= */

.bg-decoration {
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -2; /* behind header/card */
}

/* Soft, glowing blobs */
.floating-shape {
  position: absolute;
  border-radius: 50%;
  will-change: transform, opacity;
  filter: blur(6px);
  /* Two overlapping radial gradients for depth */
  background:
    radial-gradient(circle at 30% 30%, rgba(0, 97, 255, 0.22), rgba(0, 97, 255, 0.10) 45%, transparent 65%),
    radial-gradient(circle at 70% 70%, rgba(0, 97, 255, 0.18), transparent 60%);
  animation: floatBlob 14s ease-in-out infinite;
  opacity: 0.6;
}

/* Positions & sizes (tweak as you like) */
.floating-shape:nth-child(1) {
  --size: 300px;
  width: var(--size); height: var(--size);
  top: 10%; right: 10%;
  animation-delay: 0s;
}
.floating-shape:nth-child(2) {
  --size: 220px;
  width: var(--size); height: var(--size);
  bottom: 18%; left: 6%;
  animation-delay: 4.2s;
}
.floating-shape:nth-child(3) {
  --size: 160px;
  width: var(--size); height: var(--size);
  top: 52%; right: 28%;
  animation-delay: 8.4s;
}

/* A subtle starfield of tiny particles */
.bg-decoration::after {
  content: "";
  position: absolute;
  inset: -10%;
  opacity: 0.5;
  background-repeat: no-repeat;
  /* multiple tiny dots sprinkled around the viewport */
  background-image:
    radial-gradient(1.5px 1.5px at 8% 15%,  rgba(0, 97, 255, 0.14) 99%, transparent 100%),
    radial-gradient(1.6px 1.6px at 18% 70%, rgba(0, 97, 255, 0.10) 99%, transparent 100%),
    radial-gradient(1.4px 1.4px at 28% 35%, rgba(0, 97, 255, 0.12) 99%, transparent 100%),
    radial-gradient(1.5px 1.5px at 42% 82%, rgba(0, 97, 255, 0.09) 99%, transparent 100%),
    radial-gradient(1.6px 1.6px at 56% 22%, rgba(0, 97, 255, 0.13) 99%, transparent 100%),
    radial-gradient(1.5px 1.5px at 68% 58%, rgba(0, 97, 255, 0.11) 99%, transparent 100%),
    radial-gradient(1.4px 1.4px at 78% 28%, rgba(0, 97, 255, 0.10) 99%, transparent 100%),
    radial-gradient(1.6px 1.6px at 88% 66%, rgba(0, 97, 255, 0.12) 99%, transparent 100%);
  animation: starDrift 60s linear infinite;
}

/* Blob motion */
@keyframes floatBlob {
  0%, 100% { transform: translate3d(0, 0, 0) scale(1) rotate(0deg); opacity: 0.55; }
  25%      { transform: translate3d(-12px, -24px, 0) scale(1.03) rotate(8deg); opacity: 0.65; }
  50%      { transform: translate3d(  0px, -14px, 0) scale(0.98) rotate(0deg); opacity: 0.60; }
  75%      { transform: translate3d( 12px, -28px, 0) scale(1.04) rotate(-8deg); opacity: 0.68; }
}

/* Tiny particles drift subtly */
@keyframes starDrift {
  0%   { transform: translate3d(0, 0, 0); }
  100% { transform: translate3d(-80px, -60px, 0); }
}

/* Respect reduced-motion */
@media (prefers-reduced-motion: reduce) {
  .floating-shape,
  .bg-decoration::after { animation: none !important; }
}

  </style>
</head>
<body>
  <!-- Background -->
  <canvas class="bg-canvas" id="bgCanvas" aria-hidden="true"></canvas>
  <div class="bg-decoration" aria-hidden="true">
    <div class="floating-shape"></div>
    <div class="floating-shape"></div>
    <div class="floating-shape"></div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="header__inner">
      <picture>
        <source media="(max-width: 768px)" srcset="../logos/rm-bg/icon1.png"/>
        <img class="logo" src="../logos/rm-bg/logo1.png" alt="ProMatch"/>
      </picture>

      <div class="progress-container" aria-live="polite">
        <span id="stepText">Step 3 of 8</span>
        <div class="progress-bar" aria-hidden="true">
          <div class="progress-fill" id="headerProgress"></div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main -->
  <main class="container">
    <section class="form-card" aria-labelledby="skills-title">
      <!-- Card Header -->
      <div class="form-header">
        <div class="step-badge">Skills &amp; Expertise</div>
        <h1 class="form-title" id="skills-title">What are your key skills?</h1>
        <p class="form-subtitle">Add your most relevant skills to showcase your expertise to clients</p>
      </div>

      <!-- Form -->
      <form id="skillsForm" aria-describedby="skills-hint">
        <!-- Add Skills -->
        <div class="form-group">
          <label class="form-label" for="skillInput">Add Skills</label>

          <div class="input-row">
            <div class="input-container">
              <input 
                type="text" 
                class="form-input" 
                id="skillInput"
                placeholder="Type a skill (e.g. Laravel) and press Enter"
                autocomplete="off"
              >
            </div>

            <div class="level-select-wrap">
              <label class="sr-only" for="levelSelect">Proficiency</label>
              <select id="levelSelect" class="level-select">
                <option value="1">Beginner</option>
                <option value="2">Junior</option>
                <option value="3" selected>Intermediate</option>
                <option value="4">Advanced</option>
                <option value="5">Expert</option>
              </select>
            </div>
          </div>

          <p id="skills-hint" class="input-hint">
            Choose a level in the dropdown, press Enter to add. Click the 5 dots on a chip to adjust level (1 = Beginner … 5 = Expert). Use × to remove.
          </p>
        </div>

        <!-- Progress -->
        <div class="skills-progress" aria-live="polite">
          <div class="progress-text">
            Skills added: <strong id="skillCount">0</strong> / 10
          </div>
          <div class="progress-mini">
            <div class="progress-mini__fill" id="progressFill"></div>
          </div>
          <div class="progress-text">Minimum: 3</div>
        </div>

        <!-- Skills Area -->
        <div class="skills-area" id="skillsArea">
          <div class="skills-empty" id="skillsEmpty">Add your first skill to get started.</div>
          <div class="skills-list" id="skillsList" role="list"></div>
        </div>

        <!-- Tips -->
        <div class="tips">
          <strong>Pro tip:</strong> Focus on 5–8 core skills rather than listing everything. Quality helps you stand out.
        </div>

        <!-- Actions -->
        <div class="form-actions">
          <a href="#" class="btn btn-back" id="backBtn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Back
          </a>

          <button type="button" class="btn btn-primary" id="continueBtn" disabled>
            <span>Continue</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </form>
    </section>
  </main>

  <script>
    // ProMatch — Skills & Expertise (modern JS)
    (() => {
      "use strict";

      // ---- DOM ----
      const input = document.getElementById("skillInput");
      const levelSelect = document.getElementById("levelSelect");

      const skillCountEl   = document.getElementById("skillCount");
      const progressFillEl = document.getElementById("progressFill");

      const listEl  = document.getElementById("skillsList");
      const emptyEl = document.getElementById("skillsEmpty");

      const continueBtn = document.getElementById("continueBtn");
      const backBtn     = document.getElementById("backBtn");
      const formEl      = document.getElementById("skillsForm");

      const headerProgress = document.getElementById("headerProgress");
      const stepText       = document.getElementById("stepText");

      // ---- State/const ----
      const MAX_SKILLS = 10;
      const MIN_SKILLS = 3;
      const CURRENT_STEP = 3;
      const TOTAL_STEPS = 8;

      const LEVEL_LABELS = {
        1:"Beginner",
        2:"Junior",
        3:"Intermediate",
        4:"Advanced",
        5:"Expert"
      };

      /** @type {{name:string, level:number}[]} */
      let skills = [];

      // ---- Utils ----
      const clamp = (n,a,b) => Math.max(a, Math.min(b, n));
      const levelLabel = (n) => LEVEL_LABELS[n] || "Intermediate";
      const esc = (s) => String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
      function canonicalName(name){
        return name.trim().replace(/\s+/g,' ').replace(/[^\w\s.+#-]/g,'').slice(0,50);
      }
      function save() {
        try { localStorage.setItem("onboarding_skills", JSON.stringify(skills)); } catch {}
      }
      function load() {
        try {
          const raw = localStorage.getItem("onboarding_skills");
          if (!raw) return;
          const parsed = JSON.parse(raw);
          if (Array.isArray(parsed)) {
            skills = parsed.map(s => ({
              name: canonicalName(s?.name || ""),
              level: clamp(Number(s?.level || 3) || 3, 1, 5)
            })).filter(s => s.name);
          }
        } catch {}
      }

      // ---- Render ----
      function render() {
        // counts/progress
        if (skillCountEl) skillCountEl.textContent = String(skills.length);
        if (progressFillEl) {
          const pct = Math.min((skills.length / MAX_SKILLS) * 100, 100);
          progressFillEl.style.width = pct + "%";
        }
        if (continueBtn) continueBtn.disabled = skills.length < MIN_SKILLS;

        // list / empty
        if (!skills.length) {
          emptyEl.style.display = "block";
          listEl.style.display = "none";
          save();
          return;
        }
        emptyEl.style.display = "none";
        listEl.style.display = "flex";
        listEl.innerHTML = "";

        skills.forEach((s, idx) => {
          const chip = document.createElement("div");
          chip.className = "skill-chip";
          chip.dataset.idx = String(idx);
          chip.setAttribute("role", "listitem");
          chip.setAttribute("aria-label", `${s.name}, ${levelLabel(s.level)}`);

          chip.innerHTML = `
            <span class="skill-name">${esc(s.name)}</span>
            <span class="level-badge">${levelLabel(s.level)}</span>
            <div class="skill-level" role="radiogroup" aria-label="Proficiency for ${esc(s.name)}">
              ${[1,2,3,4,5].map(i => `
                <button type="button"
                        class="level-dot ${i <= s.level ? 'active' : ''}"
                        data-dot="${i}"
                        aria-label="${levelLabel(i)} (${i}/5)"
                        aria-checked="${i === s.level ? 'true' : 'false'}"></button>
              `).join("")}
            </div>
            <button type="button" class="chip-remove" aria-label="Remove ${esc(s.name)}">×</button>
          `;
          listEl.appendChild(chip);
        });

        save();
      }

      // ---- Actions ----
      function tryAddSkill(raw, levelOverride) {
        if (!raw) return;
        const baseLevel = clamp(Number(levelOverride ?? levelSelect?.value ?? 3) || 3, 1, 5);

        const parts = String(raw).split(/[,\n]/).map(canonicalName).filter(Boolean);
        for (const name of parts) {
          if (skills.length >= MAX_SKILLS) break;
          const exists = skills.some(s => s.name.toLowerCase() === name.toLowerCase());
          if (!exists) skills.push({ name, level: baseLevel });
        }
        render();
      }

      function removeByIndex(idx) {
        if (idx < 0 || idx >= skills.length) return;
        skills.splice(idx, 1);
        render();
      }

      function setLevelByIndex(idx, level) {
        if (!skills[idx]) return;
        skills[idx].level = clamp(level, 1, 5);
        render();
      }

      // ---- Events ----
      if (input) {
        input.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === ",") {
            e.preventDefault();
            const value = input.value;
            input.value = "";
            tryAddSkill(value);
          } else if (e.key === "Backspace" && !input.value && skills.length) {
            e.preventDefault();
            removeByIndex(skills.length - 1);
          }
        });
        input.addEventListener("paste", (e) => {
          const text = (e.clipboardData || window.clipboardData).getData("text");
          if (text && /,|\n/.test(text)) {
            e.preventDefault();
            tryAddSkill(text);
            input.value = "";
          }
        });
      }

      listEl.addEventListener("click", (e) => {
        const chip = e.target.closest(".skill-chip");
        if (!chip) return;
        const idx = Number(chip.dataset.idx);

        if (e.target.classList.contains("chip-remove")) {
          removeByIndex(idx);
          return;
        }

        const dot = e.target.closest(".level-dot");
        if (dot) {
          const level = Number(dot.getAttribute("data-dot")) || 3;
          setLevelByIndex(idx, level);
        }
      });

      continueBtn.addEventListener("click", () => {
        if (continueBtn.disabled) return;
        save();
        // Step -> 4/8
        const pct = (4 / TOTAL_STEPS) * 100;
        headerProgress.style.width = pct + "%";
        stepText.textContent = "Step 4 of 8";
        setTimeout(() => {
          try { window.location.href = "/onboarding/experience"; }
          catch { alert("Skills saved! Moving to experience…"); }
        }, 400);
      });

      backBtn.addEventListener("click", (e) => {
        e.preventDefault();
        try { window.location.href = "/onboarding/location"; }
        catch { alert("Going back to location…"); }
      });

      formEl.addEventListener("submit", (e) => e.preventDefault());

      // ---- Boot ----
      document.addEventListener("DOMContentLoaded", () => {
        // Ensure header progress reflects current step (3/8)
        const startPct = (CURRENT_STEP / TOTAL_STEPS) * 100;
        headerProgress.style.width = startPct + "%";
        stepText.textContent = `Step ${CURRENT_STEP} of ${TOTAL_STEPS}`;

        load();
        render();
        setTimeout(() => { try { input && input.focus(); } catch {} }, 300);
      });
    })();
  </script>
</body>
</html>
